# 飞滴出行网约车项目2022版（白皮书）

## 项目概述

### 项目整体介绍。

让学生对网约车项目有一个直观的了解，知道自己做的项目整体是什么样。

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30/1652421194044/80397bfc5f764d7eac6b6f40883980ca.png)

### 介绍网络预约出租汽车监管信息交互平台总体技术要求

让学生了解国家对网约车行业的规范。

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30/1652421194044/a5358fface2b4815a9cd56f4da860be7.png)

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30/1652421194044/81cbffa274f54122835277eb3a4c49f0.png)

## 实际项目的组织方式

人员组织：学习公司中人员的组织情况。包括产品、开发、测试、运营。
开发流程：学习公司是如何进行开发的，团队之间如何进行协作。

## 项目文档

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30/1652421194044/c1f00d8e156649caaf3fc09975045c5e.png)

## 项目整体设计

### 架构设计原则

学习架构设计的一些指导原则，让设计有据可循。

### 网约车项目业务架构

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30/1652421194044/f4ed032886604b3eac0fb5adb6e62bdd.jpg)

### 接口设计

掌握常用的接口设计原则，让我们的接口更优雅。

如何通过设计保证接口的安全。

正确的在项目中应用RESTful风格。

### 工程设计

让学生学习：项目整体结构、单个工程结构，项目依赖管理。

实践：逻辑自上而下分三层结构：业务层、能力层、基础层。

### DB设计

每个业务有不同的设计，因需求而变
网约车DB设计国家标准，让设计不迷路
索引的设计，如何正确使用索引
事务的设计，如何保证数据的一致性

## 开发规范

整个项目全程 贯彻 阿里规约开发规范

## 整体技术栈

前端：uni-app

数据库：MySQL

缓存：Redis

注册中心：Nacos，Consul，Eureka

配置中心：Spring Cloud Config

微服务网关：Spring Cloud Gateway

熔断设计与实战：Spring Cloud Circuit Breaker、Resilience4J、Spring Cloud Alibaba  Sentinel

限流设计与实战：Spring Cloud Alibaba  Sentinel

服务监控：Spring Cloud Sleuth、Spring Cloud Zipkin

分布式解决方案：Redisson、Seata

通信：Server-Sent Events

## 用户端

乘客客户端，司机客户端，BOSS端

## Api服务层

### 乘客服务

注册/登录，预估价格，乘客下单，系统派单，乘客支付，乘客评价

### 司机服务

注册/登录，司机听单，司机抢单，订单流转，发起收款

### boss服务

用户管理，订单管理，司机管理，车辆管理，司机和车辆绑定关系管理

## Service服务层

### 鉴权服务

JWT进行token的分发和验证
不同用户权限的控制
双Token刷新机制

### 订单服务

利用分布式ID生成唯一订单号
利用Redisson进行抢单数据一致性的保证
自研分布式锁组件
利用MySQL实现分布式锁
利用Redis实现分布式锁
数据库和缓存 双写一致性的实现
Seata AT模式实现 分布式事物
Seata TCC模式实现 分布式事物
Seata TCC模式中 空回滚、悬挂、幂等的解决方案

### 消息服务

利用netty实现 乘客和司机 之间消息推送
利用SSE实现 服务端主动向客户端 消息推送
利用WebSocket实现消息推送

### 网关服务

利用Spring Cloud Gateway实现网关

### 地图服务

整合高德地图API，实现LBS服务

### 支付服务

整合微信支付和支付宝支付，完成支付逻辑
最大努力通知方案实现第三方系统我我方系统的数据一致性
基于RocketMQ的分布式事物方案

### 派单引擎

XXL-Job实现分布式订单调度
利用ScheduledThreadPool实现 定时任务
Redis GEO

### 计价服务

计价规则高并发缓存分离方案实践
数据预热

### 中台能力的沉淀

认证解决方案
分布式事物解决方案
多数据源路由方案

## 项目测试

服务指标的预估测算

单元测试：Spring Boot Test，Mock测试，Mockito

接口测试：API 文档，API 调试，API Mock，API 自动化测试

并发测试：Jmeter

## 项目部署

持续集成流水线发布方案
项目的灰度发布方案
Docker，K8S，Kubesphere

## 扩展

LBS系统设计，代码重构，根据学生具体业务场景的诉求，持续更新

## 项目面试

简历如何写，面试常见问题

![](https://cdn.nlark.com/yuque/0/2022/png/292524/1648394119790-68067723-5e8d-4d05-8bc6-fe918744d420.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_43%2Ctext_5YSS54y_6K--5aCC%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10)
